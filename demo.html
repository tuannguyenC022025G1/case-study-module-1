<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cheering on the Sky</title>
    <style>
        body {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-image: url('image/1045.jpg');
            background-size: cover;
            flex-direction: column;
        }

        #game-container {
            position: relative;
            width: 400px;
            height: 400px;
            overflow: hidden;
            display: none;
            background-image: url('image/clouds.jpg');
            background-size: cover;
        }

        #player {
            position: absolute;
            bottom: 10px;
            width: 50px;
            height: 50px;
            background-image: url('image/k√©t-bia.png');
            background-size: cover;
            border-radius: 50%;
        }

        .ball {
            position: absolute;
            width: 30px;
            height: 30px;
            background-image: url('image/chai-bia.png');
            background-size: cover;
            border-radius: 50%;
        }

        #score, #timer {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 16px;
        }

        #timer {
            top: 40px;
        }

        #leaderboard, #buttons-container {
            display: none;
            text-align: center;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px;
            border-radius: 10px;
        }

        #start-button, #replay-button, #quit-button {
            padding: 15px 30px;
            font-size: 20px;
            cursor: pointer;
            background-color: deepskyblue;
            color: white;
            border: none;
            border-radius: 5px;
            text-shadow: 0 0 5px cyan, 0 0 10px blue, 0 0 15px purple;
        }
    </style>
</head>
<body>
<button id="start-button" onclick="startGame()">Start Game</button>
<div id="game-container">
    <div id="score">Score: 0</div>
    <div id="timer">Time: 60s</div>
    <div id="player"></div>
</div>
<div id="leaderboard">
    <h2>Leaderboard</h2>
    <table>
        <thead>
        <tr>
            <th>Rank</th>
            <th>Player</th>
            <th>Score</th>
        </tr>
        </thead>
        <tbody id="leaderboard-body"></tbody>
    </table>
</div>
<div id="buttons-container">
    <button id="replay-button" onclick="startGame()">Replay</button>
    <button id="quit-button" onclick="quitGame()">Quit Game</button>
</div>
<script>
    let score = 0, timeLeft = 60, misses = 0, gameOver = false, gameStarted = false;
    let leaderboard = [];
    const player = document.getElementById("player");
    const gameContainer = document.getElementById("game-container");
    const scoreDisplay = document.getElementById("score");
    const timerDisplay = document.getElementById("timer");
    const leaderboardTable = document.getElementById("leaderboard-body");
    const leaderboardDiv = document.getElementById("leaderboard");
    const buttonsContainer = document.getElementById("buttons-container");

    function createBall() {
        const ball = document.createElement("div");
        ball.classList.add("ball");
        ball.style.left = Math.random() * 370 + "px";
        ball.style.top = "0px";
        gameContainer.appendChild(ball);
        return ball;
    }

    function isCollision(player, ball) {
        const playerRect = player.getBoundingClientRect();
        const ballRect = ball.getBoundingClientRect();
        return (
            playerRect.top <= ballRect.bottom &&
            playerRect.bottom >= ballRect.top &&
            playerRect.left <= ballRect.right &&
            playerRect.right >= ballRect.left
        );
    }

    function updateGameArea() {
        if (gameOver) return;

        const balls = document.getElementsByClassName("ball");
        for (let i = 0; i < balls.length; i++) {
            let ball = balls[i];
            let ballY = parseInt(ball.style.top);
            if (ballY > 370) {
                ball.remove();
                misses++;
                if (misses >= 3) {
                    endGame();
                    return;
                }
            } else {
                ball.style.top = (ballY + 10) + "px";
                if (isCollision(player, ball)) {
                    ball.remove();
                    score++;
                    scoreDisplay.textContent = `Score: ${score}`;
                }
            }
        }

        if (Math.random() < 0.05) createBall();

        requestAnimationFrame(updateGameArea);
    }

    function updateTimer() {
        if (gameOver) return;
        if (timeLeft > 0) {
            timeLeft--;
            timerDisplay.textContent = `Time: ${timeLeft}s`;
            setTimeout(updateTimer, 1000);
        } else {
            endGame();
        }
    }

    function endGame() {
        gameOver = true;
        gameStarted = false;
        gameContainer.style.display = "none";
        leaderboardDiv.style.display = "block";
        buttonsContainer.style.display = "block";
        leaderboard.push({player: `Player ${leaderboard.length + 1}`, score});
        leaderboard.sort((a, b) => b.score - a.score);
        leaderboardTable.innerHTML = "";
        for (let i = 0; i < leaderboard.length; i++) {
            leaderboardTable.innerHTML += `<tr><td>${i + 1}</td><td>${leaderboard[i].player}</td><td>${leaderboard[i].score}</td></tr>`;
        }
    }

    function startGame() {
        gameOver = false;
        gameStarted = true;
        score = 0;
        misses = 0;
        timeLeft = 60;
        scoreDisplay.textContent = `Score: 0`;
        timerDisplay.textContent = `Time: 60s`;
        gameContainer.style.display = "block";
        leaderboardDiv.style.display = "none";
        buttonsContainer.style.display = "none";
        document.addEventListener("mousemove", movePlayer);
        document.getElementById("start-button").style.display = "none";
        updateGameArea();
        updateTimer();
    }

    function movePlayer(event) {
        let rect = gameContainer.getBoundingClientRect();
        let newX = event.clientX - rect.left - 25;
        newX = Math.max(0, Math.min(350, newX));
        player.style.left = newX + "px";
    }
    const quitGame = () => {
        document.body.innerHTML = "<h1 style='color: red'>Thank you for playing!</h1>";
    };
</script>
</body>
</html>
